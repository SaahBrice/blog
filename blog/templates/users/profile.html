{% extends "base.html" %}

{% block content %}
<h2>{{ user_profile.username }}'s Profile</h2>





{% if user_profile.profile_picture %}
    <img src="{{ user_profile.profile_picture.url }}" alt="Profile Picture">
{% else %}
<div class="profile">
    <img src="{{ avatar_url }}" alt="{{ user_profile.username }}'s avatar" class="avatar">
    <h1>{{ user_profile.username }}</h1>
    <!-- Rest of the profile template -->
</div>
{% endif %}

<p>Email: {{ user_profile.email }}</p>
<p>Bio: {{ user_profile.bio }}</p>
<p>Location: {{ user_profile.location }}</p>
<p>Website: <a href="{{ user_profile.website }}">{{ user_profile.website }}</a></p>
<p>Joined: {{ user_profile.date_joined }}</p>
<p>Followers: {{ user_profile.followers.count }}</p>
<p>Following: {{ user_profile.following.count }}</p>

<p>
    Status:
    {% if user_profile.is_verified %}
        <span class="badge">Verified</span>
    {% endif %}
    {% if user_profile.is_premium %}
        <span class="badge">Premium</span>
    {% endif %}
    {% if user_profile.is_writer %}
        <span class="badge">Writer</span>
    {% endif %}
</p>


{% if user == user_profile %}
    <a href="{% url 'user_profile_edit' %}">Edit Profile</a>
    {% if not user.is_premium %}
        <a href="{% url 'toggle_premium' %}">Become Premium</a>
    {% else %}
        <a href="{% url 'toggle_premium' %}">Cancel Premium</a>
    {% endif %}
{% endif %}




{% if user.is_authenticated and user != user_profile %}
    <a href="{% url 'toggle_follow' user_profile.username %}">
        {% if is_following %}
            Unfollow
        {% else %}
            Follow
        {% endif %}
    </a>
    <a href="{% url 'toggle_block' user_profile.username %}">
        {% if is_blocked %}
            Unblock
        {% else %}
            Block
        {% endif %}
    </a>
{% endif %}

{% if user == user_profile %}
    <a href="{% url 'user_profile_edit' %}">Edit Profile</a>
    <a href="{% url 'followers_list' %}">View Followers</a>
    <a href="{% url 'account_logout' %}">Logout</a>
{% endif %}

<h3>Recent Articles</h3>
<ul>
{% for article in articles %}
    <li><a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a></li>
{% empty %}
    <li>No articles yet.</li>
{% endfor %}
</ul>
{% endblock %}