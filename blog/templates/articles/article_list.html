{% extends "base.html" %}

{% block content %}
<h2>Articles</h2>

<div>
    <h3>Tags</h3>
    {% for tag in tags %}
        <a href="{% url 'article_by_tag' tag.slug %}" {% if tag.slug == current_tag %}style="font-weight: bold;"{% endif %}>{{ tag.name }}</a>
    {% endfor %}
</div>

{% if suggested_users %}
<div class="suggested-users">
    <h3>Suggested Writers</h3>
    <ul>
        {% for suggested_user in suggested_users %}
            <li>
                <a href="{% url 'user_profile' username=suggested_user.username %}">
                    {{ suggested_user.username }}
                </a>
            </li>
        {% endfor %}
    </ul>
</div>
{% endif %}


{% if user.is_authenticated %}
    <a href="{% url 'article_create' %}">Create New Article</a>
    <a href="{% url 'bookmarked_articles' %}">Saved Articles</a>

    <h3>New Articles</h3>
    <ul>
    {% for article in new_articles %}
        <li>
            <a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a>
            <p>Reactions: {{ article.total_reactions }} | Comments: {{ article.comment_count }}</p>
            <small>Tags: {% for tag in article.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small>
        </li>
    {% empty %}
        <li>No new articles available.</li>
    {% endfor %}
    </ul>
    
    
    
    <h3>Articles from People You Follow</h3>
        <ul>
        {% for article in followee_articles %}
            <li>
                <a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a>
                <p>Reactions: {{ article.total_reactions }} | Comments: {{ article.comment_count }}</p>
                <small>Tags: {% for tag in article.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small>
            </li>
        {% empty %}
            <li>No articles from people you follow.</li>
        {% endfor %}
        </ul>
    
        <h3>Discover New Topics</h3>
        <ul>
        {% for article in discover_articles %}
            <li>
                <a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a>
                <p>Reactions: {{ article.total_reactions }} | Comments: {{ article.comment_count }}</p>
                <small>Tags: {% for tag in article.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small>
            </li>
        {% empty %}
            <li>No articles to discover.</li>
        {% endfor %}
        </ul>



{% endif %}












{% for article in articles %}
    <li>
        <a href="{% url 'article_detail' article.pk %}">{{ article.title }}</a>
        <p>Reactions: {{ article.total_reactions }} | Comments: {{ article.comment_count }}</p>
        <small>Tags: {% for tag in article.tags.all %}{{ tag.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small>
    </li>
{% empty %}
    <li>No articles available.</li>
{% endfor %}
</ul>
{% endblock %}